{"_path":"/c++/googletest-mockcpp/googletest","_dir":"googletest-mockcpp","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"GoogleTest测试注册代码理解","description":"","author":"Julian","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"googletest"},"children":[{"type":"text","value":"GoogleTest"}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"注册测试"},"children":[{"type":"text","value":"注册测试"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这一个节用我自己写的代码展示GoogleTest如何注册测试。"}]},{"type":"element","tag":"h4","props":{"id":"基础"},"children":[{"type":"text","value":"基础"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如下文代码所示，初始化子类的静态成员变量"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"static shared_ptr<test_t> test_info;"}]},{"type":"text","value":"时，可调用基类的静态成员方法"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"test_t::register_test()"}]},{"type":"text","value":"，从而将一个子类对象地址存放到基类的的静态成员变量"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"static vector<shared_ptr<test_t>> v_tests;"}]},{"type":"text","value":"或全局变量vector中。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"执行测试时，使用基类指针调用虚函数"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"test_info->test_body();"}]},{"type":"text","value":"，可执行到每一个子类的重写虚函数。"}]},{"type":"element","tag":"code","props":{"code":"#include <iostream>\n#include <memory>\n#include <vector>\n\nusing namespace std;\n\n/* 基类 */\nclass test_t {\npublic:\n    virtual ~test_t(){};\n    virtual void test_body(){};\n\n    /* 初始化子类的静态成员变量时被调用。接收一个子类对象指针，存放到静态成员v_tests。*/\n    static shared_ptr<test_t> register_test(shared_ptr<test_t> sp) {\n        v_tests.push_back(sp);\n        return sp;\n        // return nullptr; // 也可以返回NULL。\n    }\n\npublic:\n    static vector<shared_ptr<test_t>> v_tests;\n};\nvector<shared_ptr<test_t>> test_t::v_tests = vector<shared_ptr<test_t>>();\n\n/* 子类 */\nclass test_A_t : public test_t {\npublic:\n    ~test_A_t() override{};\n    virtual void test_body() override { cout << \"test_body of test_A_t\" << endl; };\n\npublic:\n    /**\n     * 这个静态成员的作用是让程序有机会在所有函数之外执行一段程序。\n     * 即，对其初始化时，调用注册函数（基类的静态成员方法）。\n     */\n    static shared_ptr<test_t> test_info;\n};\nshared_ptr<test_t> test_A_t::test_info = test_t::register_test(make_shared<test_A_t>());\n\nint main() {\n    for (int i = 0; i < test_t::v_tests.size(); i++) {\n        auto test_info = test_t::v_tests[i];\n        test_info->test_body();\n    }\n}\n","filename":"main.c","highlights":[14,21,29,38,43],"language":"cpp","meta":"[main.c]{14, 21, 29, 38, 43}"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"<iostream>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"<memory>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"<vector>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"using"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-52c52f"},"children":[{"type":"text","value":"namespace"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a6dbaa"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d0913"},"children":[{"type":"text","value":"/* 基类 */\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-52c52f"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a6dbaa"},"children":[{"type":"text","value":"test_t"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-52c52f"},"children":[{"type":"text","value":"public:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"virtual"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09fd12"},"children":[{"type":"text","value":"~test_t"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"(){};\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"virtual"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-52c52f"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09fd12"},"children":[{"type":"text","value":"test_body"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"(){};\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d0913"},"children":[{"type":"text","value":"    /* 初始化子类的静态成员变量时被调用。接收一个子类对象指针，存放到静态成员v_tests。*/\n"}]}]},{"type":"element","tag":"span","props":{"class":"line highlight","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"static"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a6dbaa"},"children":[{"type":"text","value":"shared_ptr"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-d14fc3"},"children":[{"type":"text","value":"test_t"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-09fd12"},"children":[{"type":"text","value":"register_test"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a6dbaa"},"children":[{"type":"text","value":"shared_ptr"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-d14fc3"},"children":[{"type":"text","value":"test_t"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-ac0022"},"children":[{"type":"text","value":"sp"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"        v_tests."}]},{"type":"element","tag":"span","props":{"class":"ct-09fd12"},"children":[{"type":"text","value":"push_back"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"(sp);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" sp;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d0913"},"children":[{"type":"text","value":"        // return nullptr; // 也可以返回NULL。\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-52c52f"},"children":[{"type":"text","value":"public:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line highlight","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"static"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" vector"}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"shared_ptr"}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-d14fc3"},"children":[{"type":"text","value":"test_t"}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" v_tests;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"};\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"vector"}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"shared_ptr"}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-d14fc3"},"children":[{"type":"text","value":"test_t"}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d14fc3"},"children":[{"type":"text","value":"test_t"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"::v_tests "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09fd12"},"children":[{"type":"text","value":"vector"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-a6dbaa"},"children":[{"type":"text","value":"shared_ptr"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-d14fc3"},"children":[{"type":"text","value":"test_t"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":">>();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d0913"},"children":[{"type":"text","value":"/* 子类 */\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"class":"ct-52c52f"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a6dbaa"},"children":[{"type":"text","value":"test_A_t"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" : "}]},{"type":"element","tag":"span","props":{"class":"ct-52c52f"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d14fc3"},"children":[{"type":"text","value":"test_t"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"class":"ct-52c52f"},"children":[{"type":"text","value":"public:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-09fd12"},"children":[{"type":"text","value":"~test_A_t"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"() "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"override"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"{};\n"}]}]},{"type":"element","tag":"span","props":{"class":"line highlight","line":29},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"virtual"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-52c52f"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09fd12"},"children":[{"type":"text","value":"test_body"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"() "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"override"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" { cout "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"\"test_body of test_A_t\""}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" endl; };\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{"class":"ct-52c52f"},"children":[{"type":"text","value":"public:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d0913"},"children":[{"type":"text","value":"    /**\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d0913"},"children":[{"type":"text","value":"     * 这个静态成员的作用是让程序有机会在所有函数之外执行一段程序。\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d0913"},"children":[{"type":"text","value":"     * 即，对其初始化时，调用注册函数（基类的静态成员方法）。\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d0913"},"children":[{"type":"text","value":"     */\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":36},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"static"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" shared_ptr"}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-d14fc3"},"children":[{"type":"text","value":"test_t"}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" test_info;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":37},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"};\n"}]}]},{"type":"element","tag":"span","props":{"class":"line highlight","line":38},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"shared_ptr"}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-d14fc3"},"children":[{"type":"text","value":"test_t"}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d14fc3"},"children":[{"type":"text","value":"test_A_t"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"::test_info "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d14fc3"},"children":[{"type":"text","value":"test_t"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-09fd12"},"children":[{"type":"text","value":"register_test"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-09fd12"},"children":[{"type":"text","value":"make_shared"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-d14fc3"},"children":[{"type":"text","value":"test_A_t"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":">());\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":39},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":40},"children":[{"type":"element","tag":"span","props":{"class":"ct-52c52f"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09fd12"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":41},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-52c52f"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" i "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cadfd3"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"; i "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d14fc3"},"children":[{"type":"text","value":"test_t"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"::v_tests."}]},{"type":"element","tag":"span","props":{"class":"ct-09fd12"},"children":[{"type":"text","value":"size"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"(); i"}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"++"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":42},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-52c52f"},"children":[{"type":"text","value":"auto"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" test_info "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d14fc3"},"children":[{"type":"text","value":"test_t"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"::v_tests[i];\n"}]}]},{"type":"element","tag":"span","props":{"class":"line highlight","line":43},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"        test_info->"}]},{"type":"element","tag":"span","props":{"class":"ct-09fd12"},"children":[{"type":"text","value":"test_body"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":44},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":45},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"调试使用的CMake文件："},{"type":"element","tag":"a","props":{"href":"#cmakeliststxt"},"children":[{"type":"text","value":"CMakeLists.txt"}]}]},{"type":"element","tag":"h4","props":{"id":"宏定义"},"children":[{"type":"text","value":"宏定义"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"将上节代码修改为宏定义。TEST宏包含了子类的定义，子类静态成员变量的初始化和子类test_body函数的定义。test_body函数的函数体和TEST宏下方的代码块，组成函数。"}]},{"type":"element","tag":"code","props":{"code":"#include <iostream>\n#include <memory>\n#include <vector>\n\nusing namespace std;\n\n/* 基类 */\nclass test_t {\npublic:\n    virtual ~test_t(){};\n    virtual void test_body(){};\n\n    /* 初始化子类的静态成员变量时被调用。接收一个子类对象指针，存放到静态成员v_tests。*/\n    static shared_ptr<test_t> register_test(shared_ptr<test_t> sp) {\n        v_tests.push_back(sp);\n        return sp;\n        // return nullptr; // 也可以返回NULL。\n    }\n\npublic:\n    static vector<shared_ptr<test_t>> v_tests;\n};\nvector<shared_ptr<test_t>> test_t::v_tests = vector<shared_ptr<test_t>>();\n\n/* 子类 */\n#define GTEST_TEST_CLASS_NAME_(test_suite_name, test_name) test_suite_name##_##test_name##_Test\n\n#define TEST(suite_name, test_name)                                                                    \\\n    class GTEST_TEST_CLASS_NAME_(suite_name, test_name) : public test_t {                              \\\n    public:                                                                                            \\\n        ~GTEST_TEST_CLASS_NAME_(suite_name, test_name)() override{};                                   \\\n        virtual void test_body() override;                                                             \\\n                                                                                                       \\\n    public:                                                                                            \\\n        static shared_ptr<test_t> test_info;                                                           \\\n    };                                                                                                 \\\n    shared_ptr<test_t> GTEST_TEST_CLASS_NAME_(suite_name, test_name)::test_info =                      \\\n        test_t::register_test(make_shared<GTEST_TEST_CLASS_NAME_(suite_name, test_name)>());           \\\n    void GTEST_TEST_CLASS_NAME_(suite_name, test_name)::test_body()\n\nTEST(suite1, test1) { cout << \"test_body of suite1.test1\" << endl; };\n\nint main() {\n    for (int i = 0; i < test_t::v_tests.size(); i++) {\n        auto test_info = test_t::v_tests[i];\n        test_info->test_body();\n    }\n}\n","filename":"main2.c","highlights":[28,29,30,31,32,33,34,35,36,37,38,39,40,41],"language":"cpp","meta":"[main2.c]{28-41}"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"<iostream>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"<memory>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"<vector>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"using"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-52c52f"},"children":[{"type":"text","value":"namespace"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a6dbaa"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d0913"},"children":[{"type":"text","value":"/* 基类 */\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-52c52f"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a6dbaa"},"children":[{"type":"text","value":"test_t"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-52c52f"},"children":[{"type":"text","value":"public:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"virtual"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09fd12"},"children":[{"type":"text","value":"~test_t"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"(){};\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"virtual"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-52c52f"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09fd12"},"children":[{"type":"text","value":"test_body"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"(){};\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d0913"},"children":[{"type":"text","value":"    /* 初始化子类的静态成员变量时被调用。接收一个子类对象指针，存放到静态成员v_tests。*/\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"static"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a6dbaa"},"children":[{"type":"text","value":"shared_ptr"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-d14fc3"},"children":[{"type":"text","value":"test_t"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-09fd12"},"children":[{"type":"text","value":"register_test"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a6dbaa"},"children":[{"type":"text","value":"shared_ptr"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-d14fc3"},"children":[{"type":"text","value":"test_t"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-ac0022"},"children":[{"type":"text","value":"sp"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"        v_tests."}]},{"type":"element","tag":"span","props":{"class":"ct-09fd12"},"children":[{"type":"text","value":"push_back"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"(sp);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" sp;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d0913"},"children":[{"type":"text","value":"        // return nullptr; // 也可以返回NULL。\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-52c52f"},"children":[{"type":"text","value":"public:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"static"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" vector"}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"shared_ptr"}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-d14fc3"},"children":[{"type":"text","value":"test_t"}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" v_tests;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"};\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"vector"}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"shared_ptr"}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-d14fc3"},"children":[{"type":"text","value":"test_t"}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d14fc3"},"children":[{"type":"text","value":"test_t"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"::v_tests "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09fd12"},"children":[{"type":"text","value":"vector"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-a6dbaa"},"children":[{"type":"text","value":"shared_ptr"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-d14fc3"},"children":[{"type":"text","value":"test_t"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":">>();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d0913"},"children":[{"type":"text","value":"/* 子类 */\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"#define"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09fd12"},"children":[{"type":"text","value":"GTEST_TEST_CLASS_NAME_"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ac0022"},"children":[{"type":"text","value":"test_suite_name"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-ac0022"},"children":[{"type":"text","value":"test_name"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":") test_suite_name##_##test_name##_Test\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line highlight","line":28},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"#define"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09fd12"},"children":[{"type":"text","value":"TEST"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ac0022"},"children":[{"type":"text","value":"suite_name"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-ac0022"},"children":[{"type":"text","value":"test_name"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":")                                                                    \\\n"}]}]},{"type":"element","tag":"span","props":{"class":"line highlight","line":29},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"    class GTEST_TEST_CLASS_NAME_(suite_name, test_name) : public test_t {                              \\\n"}]}]},{"type":"element","tag":"span","props":{"class":"line highlight","line":30},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"    public:                                                                                            \\\n"}]}]},{"type":"element","tag":"span","props":{"class":"line highlight","line":31},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"        ~GTEST_TEST_CLASS_NAME_(suite_name, test_name)() override{};                                   \\\n"}]}]},{"type":"element","tag":"span","props":{"class":"line highlight","line":32},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"        virtual void test_body() override;                                                             \\\n"}]}]},{"type":"element","tag":"span","props":{"class":"line highlight","line":33},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"                                                                                                       \\\n"}]}]},{"type":"element","tag":"span","props":{"class":"line highlight","line":34},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"    public:                                                                                            \\\n"}]}]},{"type":"element","tag":"span","props":{"class":"line highlight","line":35},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"        static shared_ptr<test_t> test_info;                                                           \\\n"}]}]},{"type":"element","tag":"span","props":{"class":"line highlight","line":36},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"    };                                                                                                 \\\n"}]}]},{"type":"element","tag":"span","props":{"class":"line highlight","line":37},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"    shared_ptr<test_t> GTEST_TEST_CLASS_NAME_(suite_name, test_name)::test_info =                      \\\n"}]}]},{"type":"element","tag":"span","props":{"class":"line highlight","line":38},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"        test_t::register_test(make_shared<GTEST_TEST_CLASS_NAME_(suite_name, test_name)>());           \\\n"}]}]},{"type":"element","tag":"span","props":{"class":"line highlight","line":39},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"    void GTEST_TEST_CLASS_NAME_(suite_name, test_name)::test_body()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line highlight","line":40},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line highlight","line":41},"children":[{"type":"element","tag":"span","props":{"class":"ct-09fd12"},"children":[{"type":"text","value":"TEST"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"(suite1, test1) { cout "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"\"test_body of suite1.test1\""}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" endl; };\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":42},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":43},"children":[{"type":"element","tag":"span","props":{"class":"ct-52c52f"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09fd12"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":44},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-52c52f"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" i "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cadfd3"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"; i "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d14fc3"},"children":[{"type":"text","value":"test_t"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"::v_tests."}]},{"type":"element","tag":"span","props":{"class":"ct-09fd12"},"children":[{"type":"text","value":"size"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"(); i"}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"++"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":45},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-52c52f"},"children":[{"type":"text","value":"auto"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" test_info "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d14fc3"},"children":[{"type":"text","value":"test_t"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"::v_tests[i];\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":46},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"        test_info->"}]},{"type":"element","tag":"span","props":{"class":"ct-09fd12"},"children":[{"type":"text","value":"test_body"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":47},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":48},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"cmakeliststxt"},"children":[{"type":"text","value":"CMakeLists.txt"}]},{"type":"element","tag":"code","props":{"code":"cmake_minimum_required(VERSION 3.22)\nproject(proj)\nadd_executable(main main.cpp)\nadd_executable(main2 main2.cpp)\n","filename":"CMakeLists.txt","language":"cmake","meta":"[CMakeLists.txt]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"cmake_minimum_required"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-337bc5"},"children":[{"type":"text","value":"VERSION"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" 3.22)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"project"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"(proj)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"add_executable"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"(main main.cpp)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"add_executable"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"(main2 main2.cpp)"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"项目集成googletest"},"children":[{"type":"text","value":"项目集成googletest"}]},{"type":"element","tag":"h4","props":{"id":"下载googletest并解压"},"children":[{"type":"text","value":"下载"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"googletest"}]},{"type":"text","value":"并解压"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/google/googletest/archive/refs/tags/v1.13.0.zip","rel":["nofollow"]},"children":[{"type":"text","value":"Release v1.13.0 · google/googletest"}]}]},{"type":"element","tag":"h4","props":{"id":"cmakeliststxt-1"},"children":[{"type":"text","value":"CMakeLists.txt"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"gtest_main"}]},{"type":"text","value":"这个库包含main函数，无需再写main函数。"}]},{"type":"element","tag":"code","props":{"code":"cmake_minimum_required(VERSION 3.14)\nproject(my_project)\n\nset(CMAKE_CXX_STANDARD 14)\nset(CMAKE_CXX_STANDARD_REQUIRED ON)\n\nadd_subdirectory(\"googletest-1.13.0\")\n\nenable_testing()\n\nadd_executable(\n  hello_test\n  hello_test.cc\n)\ntarget_link_libraries(\n  hello_test\n  GTest::gtest_main\n)\n\ninclude(GoogleTest)\ngtest_discover_tests(hello_test)\n","filename":"CMakeLists.txt","language":"cmake","meta":"[CMakeLists.txt]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"cmake_minimum_required"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-337bc5"},"children":[{"type":"text","value":"VERSION"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" 3.14)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"project"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"(my_project)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"(CMAKE_CXX_STANDARD 14)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"(CMAKE_CXX_STANDARD_REQUIRED "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"ON"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"add_subdirectory"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"\"googletest-1.13.0\""}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"enable_testing"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"add_executable"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"  hello_test\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"  hello_test.cc\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"target_link_libraries"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"  hello_test\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"  GTest::gtest_main\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"include"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"(GoogleTest)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"gtest_discover_tests(hello_test)"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"编写测试用例"},"children":[{"type":"text","value":"编写测试用例"}]},{"type":"element","tag":"code","props":{"code":"#include <gtest/gtest.h>\n\n// Demonstrate some basic assertions.\nTEST(HelloTest, BasicAssertions) {\n    // Expect two strings not to be equal.\n    EXPECT_STRNE(\"hello\", \"world\");\n    // Expect equality.\n    EXPECT_EQ(7 * 6, 42) << \"not equal\";\n}\n","filename":"hello_test.cc","language":"cpp","meta":"[hello_test.cc]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"<gtest/gtest.h>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d0913"},"children":[{"type":"text","value":"// Demonstrate some basic assertions.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-09fd12"},"children":[{"type":"text","value":"TEST"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"(HelloTest, BasicAssertions) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d0913"},"children":[{"type":"text","value":"    // Expect two strings not to be equal.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-09fd12"},"children":[{"type":"text","value":"EXPECT_STRNE"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"\"hello\""}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"\"world\""}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d0913"},"children":[{"type":"text","value":"    // Expect equality.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-09fd12"},"children":[{"type":"text","value":"EXPECT_EQ"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-cadfd3"},"children":[{"type":"text","value":"7"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cadfd3"},"children":[{"type":"text","value":"6"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-cadfd3"},"children":[{"type":"text","value":"42"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"\"not equal\""}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"阅读"},{"type":"element","tag":"a","props":{"href":"https://google.github.io/googletest/","rel":["nofollow"]},"children":[{"type":"text","value":"GoogleTest User’s Guide | GoogleTest"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"h2","props":{"id":"项目集成googletest和mockcpp"},"children":[{"type":"text","value":"项目集成googletest和mockcpp"}]},{"type":"element","tag":"h3","props":{"id":"编译mockcpp项目"},"children":[{"type":"text","value":"编译"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"mockcpp"}]},{"type":"text","value":"项目"}]},{"type":"element","tag":"h4","props":{"id":"下载mockcpp并解压"},"children":[{"type":"text","value":"下载"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"mockcpp"}]},{"type":"text","value":"并解压"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/sinojelly/mockcpp/archive/refs/tags/v2.7.zip","rel":["nofollow"]},"children":[{"type":"text","value":"master-2.7.zip"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"项目目录如下："}]},{"type":"element","tag":"code","props":{"code":".\n├── googletest-1.13.0\n├── mockcpp-2.7\n├── CMakeLists.txt\n└── hello_test.cc\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14fc3"},"children":[{"type":"text","value":".\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-85d61d"},"children":[{"type":"text","value":"├──"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"googletest-1.13.0\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-85d61d"},"children":[{"type":"text","value":"├──"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"mockcpp-"}]},{"type":"element","tag":"span","props":{"class":"ct-cadfd3"},"children":[{"type":"text","value":"2.7\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-85d61d"},"children":[{"type":"text","value":"├──"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"CMakeLists.txt\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-85d61d"},"children":[{"type":"text","value":"└──"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"hello_test.cc"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"修改文件"},"children":[{"type":"text","value":"修改文件"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"mockcpp-2.7/build_install.sh"}]}]},{"type":"element","tag":"code","props":{"code":"#!/bin/bash\n# build and install\n\n# $1  --- [optional] compiler name  (default is GNU)\n# $2  --- [optional] compiler major version  (The first part of cxx compiler version)\n\n# fast fail\nset -e\n\ncur_dir=`pwd`\n# Set the install path, should be absolute path\n# INSTALL_PATH=~/test_tools/mockcpp_install\nINSTALL_PATH=${cur_dir}/install\n\n# Set the xxunit test framework name\n# XUNIT_NAME=testngpp\nXUNIT_NAME=gtest\n#XUNIT_NAME=catch2\n\n# gtest: there is a $XUNIT_HOME/include/gtest/gtest.h\n# catch2: there is a $XUNIT_HOME/include/catch2/catch_test_macros.hpp\n#XUNIT_HOME=/usr/local\nXUNIT_HOME=${cur_dir}/../googletest-1.13.0/googletest\n\n. \"tools/build_functions.sh\"\n\nMY_OS_NAME=\"\"\nMY_CXX_COMPILER_NAME=\"\"\nMY_CXX_COMPILER_MAJOR_VERSION=\"\"\nCMAKE_COMPILER_PARAM=\"\"\nMAKE_BUILD_TYPE=\"\"\n\nUSER_CHOOSED_COMPILER=\"\"\nUSER_CHOOSED_COMPILER_MAJOR_VER=\"\"\n\n# script usage 1: no parameter, use GNU compiler\nAUTO_COMPILER=\"GNU\"\nAUTO_CXX_VER=`gcc -dumpversion | awk -F.  '{print $1}'`\nInitEnviroment $AUTO_COMPILER $AUTO_CXX_VER\n\n# script usage 2: input the compiler name and major version\n#InitEnviroment $1 $2\n\n# script usage 3: choose the compiler and version\n#ReadUserChoice\n#InitEnviroment $USER_CHOOSED_COMPILER $USER_CHOOSED_COMPILER_MAJOR_VER\n\nBUILD_DIR=\"build_$MY_CXX_COMPILER_NAME\"\n\nOS_COMPILER=\"$MY_OS_NAME/$MY_CXX_COMPILER_NAME/$MY_CXX_COMPILER_MAJOR_VERSION\"\n\necho \"OS_COMPILER in Shell : $OS_COMPILER\"\n\nif [ \"$XUNIT_NAME\" == \"testngpp\" ];then\ncmake  -S . -B $BUILD_DIR/mockcpp-install4$XUNIT_NAME -DCMAKE_INSTALL_PREFIX=$INSTALL_PATH\nelse\ncmake  -S . -B $BUILD_DIR/mockcpp-install4$XUNIT_NAME -DCMAKE_INSTALL_PREFIX=$INSTALL_PATH -DMOCKCPP_XUNIT=$XUNIT_NAME -DMOCKCPP_XUNIT_HOME=$XUNIT_HOME\nfi\n\nCompileProjectInstall $MY_CXX_COMPILER_NAME $BUILD_DIR/mockcpp-install4$XUNIT_NAME\n","filename":"mockcpp-2.7/build_install.sh","highlights":[13,17,23],"language":"shell","meta":"[mockcpp-2.7/build_install.sh] {13, 17, 23}"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d0913"},"children":[{"type":"text","value":"#!/bin/bash\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d0913"},"children":[{"type":"text","value":"# build and install\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d0913"},"children":[{"type":"text","value":"# $1  --- [optional] compiler name  (default is GNU)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d0913"},"children":[{"type":"text","value":"# $2  --- [optional] compiler major version  (The first part of cxx compiler version)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d0913"},"children":[{"type":"text","value":"# fast fail\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14fc3"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cadfd3"},"children":[{"type":"text","value":"-e\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"cur_dir"}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"class":"ct-d14fc3"},"children":[{"type":"text","value":"pwd"}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"`\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d0913"},"children":[{"type":"text","value":"# Set the install path, should be absolute path\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d0913"},"children":[{"type":"text","value":"# INSTALL_PATH=~/test_tools/mockcpp_install\n"}]}]},{"type":"element","tag":"span","props":{"class":"line highlight","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"INSTALL_PATH"}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"${cur_dir}"}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"/install\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d0913"},"children":[{"type":"text","value":"# Set the xxunit test framework name\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d0913"},"children":[{"type":"text","value":"# XUNIT_NAME=testngpp\n"}]}]},{"type":"element","tag":"span","props":{"class":"line highlight","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"XUNIT_NAME"}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"gtest\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d0913"},"children":[{"type":"text","value":"#XUNIT_NAME=catch2\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d0913"},"children":[{"type":"text","value":"# gtest: there is a $XUNIT_HOME/include/gtest/gtest.h\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d0913"},"children":[{"type":"text","value":"# catch2: there is a $XUNIT_HOME/include/catch2/catch_test_macros.hpp\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d0913"},"children":[{"type":"text","value":"#XUNIT_HOME=/usr/local\n"}]}]},{"type":"element","tag":"span","props":{"class":"line highlight","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"XUNIT_HOME"}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"${cur_dir}"}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"/../googletest-1.13.0/googletest\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14fc3"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"\"tools/build_functions.sh\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"MY_OS_NAME"}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"\"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"MY_CXX_COMPILER_NAME"}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"\"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"MY_CXX_COMPILER_MAJOR_VERSION"}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"\"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"CMAKE_COMPILER_PARAM"}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"\"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"MAKE_BUILD_TYPE"}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"\"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"USER_CHOOSED_COMPILER"}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"\"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"USER_CHOOSED_COMPILER_MAJOR_VER"}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"\"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":36},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d0913"},"children":[{"type":"text","value":"# script usage 1: no parameter, use GNU compiler\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":37},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"AUTO_COMPILER"}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"\"GNU\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":38},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"AUTO_CXX_VER"}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"class":"ct-5cda7a"},"children":[{"type":"text","value":"gcc"}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cadfd3"},"children":[{"type":"text","value":"-dumpversion"}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5cda7a"},"children":[{"type":"text","value":"awk"}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cadfd3"},"children":[{"type":"text","value":"-F."}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"  '{print $1}'`\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":39},"children":[{"type":"element","tag":"span","props":{"class":"ct-85d61d"},"children":[{"type":"text","value":"InitEnviroment"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" $AUTO_COMPILER $AUTO_CXX_VER\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":40},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":41},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d0913"},"children":[{"type":"text","value":"# script usage 2: input the compiler name and major version\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":42},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d0913"},"children":[{"type":"text","value":"#InitEnviroment $1 $2\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":43},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":44},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d0913"},"children":[{"type":"text","value":"# script usage 3: choose the compiler and version\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":45},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d0913"},"children":[{"type":"text","value":"#ReadUserChoice\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":46},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d0913"},"children":[{"type":"text","value":"#InitEnviroment $USER_CHOOSED_COMPILER $USER_CHOOSED_COMPILER_MAJOR_VER\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":47},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":48},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"BUILD_DIR"}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"\"build_"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"$MY_CXX_COMPILER_NAME"}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":49},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":50},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"OS_COMPILER"}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"$MY_OS_NAME"}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"$MY_CXX_COMPILER_NAME"}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"$MY_CXX_COMPILER_MAJOR_VERSION"}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":51},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":52},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14fc3"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"\"OS_COMPILER in Shell : "}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"$OS_COMPILER"}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":53},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":54},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"$XUNIT_NAME"}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"=="}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":" \"testngpp\""}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" ];"}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"then\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":55},"children":[{"type":"element","tag":"span","props":{"class":"ct-85d61d"},"children":[{"type":"text","value":"cmake"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-cadfd3"},"children":[{"type":"text","value":"-S"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cadfd3"},"children":[{"type":"text","value":"-B"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" $BUILD_DIR"}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"/mockcpp-install4"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"$XUNIT_NAME "}]},{"type":"element","tag":"span","props":{"class":"ct-cadfd3"},"children":[{"type":"text","value":"-DCMAKE_INSTALL_PREFIX="}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"$INSTALL_PATH\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":56},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"else\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":57},"children":[{"type":"element","tag":"span","props":{"class":"ct-85d61d"},"children":[{"type":"text","value":"cmake"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-cadfd3"},"children":[{"type":"text","value":"-S"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cadfd3"},"children":[{"type":"text","value":"-B"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" $BUILD_DIR"}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"/mockcpp-install4"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"$XUNIT_NAME "}]},{"type":"element","tag":"span","props":{"class":"ct-cadfd3"},"children":[{"type":"text","value":"-DCMAKE_INSTALL_PREFIX="}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"$INSTALL_PATH"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cadfd3"},"children":[{"type":"text","value":"-DMOCKCPP_XUNIT="}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"$XUNIT_NAME"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cadfd3"},"children":[{"type":"text","value":"-DMOCKCPP_XUNIT_HOME="}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"$XUNIT_HOME\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":58},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"fi\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":59},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":60},"children":[{"type":"element","tag":"span","props":{"class":"ct-85d61d"},"children":[{"type":"text","value":"CompileProjectInstall"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" $MY_CXX_COMPILER_NAME $BUILD_DIR"}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"/mockcpp-install4"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"$XUNIT_NAME"}]}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"mockcpp-2.7/CMakeLists.txt"}]}]},{"type":"element","tag":"code","props":{"code":"CMAKE_MINIMUM_REQUIRED(VERSION 3.12...3.19)\n\nPROJECT(mockcpp)\n\nINCLUDE(ProjectVar.txt)\n\nSET(CMAKE_CXX_STANDARD 14)\n\nADD_SUBDIRECTORY(src)\n\nINSTALL(DIRECTORY include/mockcpp DESTINATION include\n        PATTERN \".svn\" EXCLUDE)\n\nINSTALL(DIRECTORY 3rdparty/fake_boost DESTINATION include\n        PATTERN \".svn\" EXCLUDE)\n\nINSTALL(DIRECTORY 3rdparty/msinttypes DESTINATION include\n        PATTERN \".svn\" EXCLUDE)\n\nSET(MOCKCPP_XUNIT \"testngpp\" CACHE STRING \"Set to gtest/cpputest/cppunit to use other testframeworks.\")\n","filename":"mockcpp-2.7/CMakeLists.txt","highlights":[7],"language":"cmake","meta":"[mockcpp-2.7/CMakeLists.txt] {7}"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"CMAKE_MINIMUM_REQUIRED"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-337bc5"},"children":[{"type":"text","value":"VERSION"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" 3.12...3.19)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"PROJECT"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"(mockcpp)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"INCLUDE"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"(ProjectVar.txt)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line highlight","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"SET"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"(CMAKE_CXX_STANDARD 14)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"ADD_SUBDIRECTORY"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"(src)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"INSTALL"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"(DIRECTORY include/mockcpp DESTINATION include\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"        PATTERN "}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"\".svn\""}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" EXCLUDE)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"INSTALL"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"(DIRECTORY 3rdparty/fake_boost DESTINATION include\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"        PATTERN "}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"\".svn\""}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" EXCLUDE)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"INSTALL"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"(DIRECTORY 3rdparty/msinttypes DESTINATION include\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"        PATTERN "}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"\".svn\""}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" EXCLUDE)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"SET"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"(MOCKCPP_XUNIT "}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"\"testngpp\""}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"CACHE"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"STRING"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"\"Set to gtest/cpputest/cppunit to use other testframeworks.\""}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":")"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"编译mockcpp"},"children":[{"type":"text","value":"编译"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"mockcpp"}]}]},{"type":"element","tag":"code","props":{"code":"cd mockcpp-2.7\n./build_install.sh\n","filename":"terminal","language":"shell","meta":"[terminal]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14fc3"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"mockcpp-"}]},{"type":"element","tag":"span","props":{"class":"ct-cadfd3"},"children":[{"type":"text","value":"2.7\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14fc3"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-85d61d"},"children":[{"type":"text","value":"/build_install.sh"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"编译项目"},"children":[{"type":"text","value":"编译项目"}]},{"type":"element","tag":"h4","props":{"id":"cmakeliststxt-2"},"children":[{"type":"text","value":"CMakeLists.txt"}]},{"type":"element","tag":"code","props":{"code":"cmake_minimum_required(VERSION 3.14)\nproject(my_project)\n\nset(CMAKE_CXX_STANDARD 14)\nset(CMAKE_CXX_STANDARD_REQUIRED ON)\n\nadd_subdirectory(\"googletest-1.13.0\")\n\nenable_testing()\n\nadd_executable(\n  hello_test\n  hello_test.cc\n)\n\ntarget_include_directories(hello_test PUBLIC ${PROJECT_SOURCE_DIR}/mockcpp-2.7/install/include)\n\ntarget_link_libraries(\n  hello_test\n  GTest::gtest_main\n  ${PROJECT_SOURCE_DIR}/mockcpp-2.7/install/lib/libmockcpp.a\n)\n\ninclude(GoogleTest)\ngtest_discover_tests(hello_test)\n","filename":"CMakeLists.txt","highlights":[16,21],"language":"cmake","meta":"[CMakeLists.txt]{16, 21}"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"cmake_minimum_required"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-337bc5"},"children":[{"type":"text","value":"VERSION"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" 3.14)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"project"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"(my_project)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"(CMAKE_CXX_STANDARD 14)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"(CMAKE_CXX_STANDARD_REQUIRED "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"ON"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"add_subdirectory"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"\"googletest-1.13.0\""}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"enable_testing"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"add_executable"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"  hello_test\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"  hello_test.cc\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line highlight","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"target_include_directories"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"(hello_test "}]},{"type":"element","tag":"span","props":{"class":"ct-337bc5"},"children":[{"type":"text","value":"PUBLIC"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"${PROJECT_SOURCE_DIR}"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"/mockcpp-2.7/install/include)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"target_link_libraries"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"  hello_test\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"  GTest::gtest_main\n"}]}]},{"type":"element","tag":"span","props":{"class":"line highlight","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"${PROJECT_SOURCE_DIR}"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"/mockcpp-2.7/install/lib/libmockcpp.a\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"include"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"(GoogleTest)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"gtest_discover_tests(hello_test)"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"编写测试用例-1"},"children":[{"type":"text","value":"编写测试用例"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当执行到add函数时，将执行add2函数。"}]},{"type":"element","tag":"code","props":{"code":"#include <gtest/gtest.h>\n#include <mockcpp/mokc.h>\n\nint add(int x, int y) { return x + y; }\n\nint add2(int x, int y) { return (x + y) * 2; }\n\nTEST(HelloTest, BasicAssertions2) {\n    MOCKER(add).stubs().will(invoke(add2));\n    EXPECT_EQ(add(5, 6), 11);\n    EXPECT_EQ(add(5, 6), 22);\n}\n","filename":"hello_test.cc","highlights":[9],"language":"cpp","meta":"[hello_test.cc]{9}"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"<gtest/gtest.h>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a2bfdd"},"children":[{"type":"text","value":"<mockcpp/mokc.h>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-52c52f"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09fd12"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-52c52f"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac0022"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-52c52f"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac0022"},"children":[{"type":"text","value":"y"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":") { "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" x "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" y; }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-52c52f"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09fd12"},"children":[{"type":"text","value":"add2"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-52c52f"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac0022"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-52c52f"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac0022"},"children":[{"type":"text","value":"y"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":") { "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" (x "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" y) "}]},{"type":"element","tag":"span","props":{"class":"ct-212458"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cadfd3"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"; }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-09fd12"},"children":[{"type":"text","value":"TEST"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"(HelloTest, BasicAssertions2) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line highlight","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-09fd12"},"children":[{"type":"text","value":"MOCKER"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"(add)."}]},{"type":"element","tag":"span","props":{"class":"ct-09fd12"},"children":[{"type":"text","value":"stubs"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"()."}]},{"type":"element","tag":"span","props":{"class":"ct-09fd12"},"children":[{"type":"text","value":"will"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-09fd12"},"children":[{"type":"text","value":"invoke"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"(add2));\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-09fd12"},"children":[{"type":"text","value":"EXPECT_EQ"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-09fd12"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-cadfd3"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-cadfd3"},"children":[{"type":"text","value":"6"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"), "}]},{"type":"element","tag":"span","props":{"class":"ct-cadfd3"},"children":[{"type":"text","value":"11"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-09fd12"},"children":[{"type":"text","value":"EXPECT_EQ"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-09fd12"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-cadfd3"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-cadfd3"},"children":[{"type":"text","value":"6"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"), "}]},{"type":"element","tag":"span","props":{"class":"ct-cadfd3"},"children":[{"type":"text","value":"22"}]},{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-730e80"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"阅读："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/sinojelly/mockcpp/blob/master/docs/ChineseVersionManual.md","rel":["nofollow"]},"children":[{"type":"text","value":"mockcpp/docs/ChineseVersionManual.md at master · sinojelly/mockcpp · GitHub"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/sinojelly/mockcpp","rel":["nofollow"]},"children":[{"type":"text","value":"sinojelly/mockcpp: Two C/C++ testing tools, mockcpp and testngpp."}]},{"type":"text","value":"。"}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-337bc5{color:#0550AE}\n.ct-5cda7a{color:#953800}\n.ct-85d61d{color:#953800}\n.ct-cadfd3{color:#0550AE}\n.ct-ac0022{color:#953800}\n.ct-d14fc3{color:#0550AE}\n.ct-09fd12{color:#8250DF}\n.ct-3d0913{color:#6E7781}\n.ct-a6dbaa{color:#953800}\n.ct-52c52f{color:#CF222E}\n.ct-a2bfdd{color:#0A3069}\n.ct-730e80{color:#24292F}\n.ct-212458{color:#CF222E}\n.dark .ct-212458{color:#FF7B72}\n.sepia .ct-212458{color:#F92672}\n.dark .ct-730e80{color:#C9D1D9}\n.sepia .ct-730e80{color:#F8F8F2}\n.dark .ct-a2bfdd{color:#A5D6FF}\n.sepia .ct-a2bfdd{color:#E6DB74}\n.dark .ct-52c52f{color:#FF7B72}\n.sepia .ct-52c52f{color:#66D9EF}\n.dark .ct-a6dbaa{color:#FFA657}\n.sepia .ct-a6dbaa{color:#A6E22E}\n.dark .ct-3d0913{color:#8B949E}\n.sepia .ct-3d0913{color:#88846F}\n.dark .ct-09fd12{color:#D2A8FF}\n.sepia .ct-09fd12{color:#A6E22E}\n.dark .ct-d14fc3{color:#79C0FF}\n.sepia .ct-d14fc3{color:#66D9EF}\n.dark .ct-ac0022{color:#FFA657}\n.sepia .ct-ac0022{color:#FD971F}\n.dark .ct-cadfd3{color:#79C0FF}\n.sepia .ct-cadfd3{color:#AE81FF}\n.dark .ct-85d61d{color:#FFA657}\n.sepia .ct-85d61d{color:#F8F8F2}\n.dark .ct-5cda7a{color:#FFA657}\n.sepia .ct-5cda7a{color:#E6DB74}\n.dark .ct-337bc5{color:#79C0FF}\n.sepia .ct-337bc5{color:#F8F8F2}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"注册测试","depth":2,"text":"注册测试"},{"id":"项目集成googletest","depth":2,"text":"项目集成googletest"},{"id":"项目集成googletest和mockcpp","depth":2,"text":"项目集成googletest和mockcpp","children":[{"id":"编译mockcpp项目","depth":3,"text":"编译mockcpp项目"},{"id":"编译项目","depth":3,"text":"编译项目"}]}]}},"_type":"markdown","_id":"content:2.c++:1.googletest-mockcpp:1.googletest.md","_source":"content","_file":"2.c++/1.googletest-mockcpp/1.googletest.md","_extension":"md"}